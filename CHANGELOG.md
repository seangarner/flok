# flok changelog

## 3.0.0 (2018/08/23)

  - [major] upgrade bundled mongo driver to `^3.1.3` which contains breaking changes from `^2.2.0`
    + adds mongo server 4.0 compatibility

## 2.0.0 (2016/12/01)

  - [major] upgrade bundled mongo driver to `^2.2.x` which contains breaking changes from `^1.x`
    + adds mongo server 3.2 compatibility
    + only migrations initialised with flok 2 will be run by flok 2
  - `flok up` will not execute if there are pending migrations from an older flok version
  - add `firstRun` flag on flok so migrations know when it's running against a pristine db

## 1.0.0 (2016/11/29)

 - no changes since 0.6.0 but marking as stable

## 0.6.0 (2016/11/18)

 - skip migrations which have a `flokVersion` which does not start `'1'`
 - add validation of migrations
 - fix logging incorrect month names
 - `flok fix` now offers wipe status option when a migration has changed
 - `flok init` dependencies include description as a comment in the generated migration
 - fix mongodb generator from inserting invalid js
 - generator documentation
 - plugin documentation
 - when logging errors or above use `stderr` instead of `stdout`

## 0.5.2 (2014/01/30)

 - stop using findAndRemove mongo method during unlock which was leading to mongod locking up

## 0.5.1 (2014/01/13)

 - fix #9 exit with error when run with unrecognised command
 - user documentation (plugin docs still pending)
 - fix bug when `flok down` where running when there are no suitable migrations results in an error
 - fix bug with `flok show` where filters wasn't working
 - tests for bin files using [nixt (https://github.com/vesln/nixt)](https://github.com/vesln/nixt)
 - plugins - `.contains` sugar on requirements

## 0.5.0 (2013/10/22)

 - new `flok fix` command interactively guides user through fixing broken migrations
 - added ability to ensure built-ins for lock and status are never loaded
 - fix date based part of generated migration file
 - fix `flok init` when using the mongodb driver for state
 - add api for plugins to be able to specify which features they require (e.g. manage state, locking, etc)
 - add api for plugins to register flok commands

## 0.4.1 (2013/10/12)

 - fix `flok show <arg>` where the argument is ignored unless specified twice
 - fix `flok show <id>` when `<id>` has an uppercase letter again

## 0.4.0 (2013/10/09)

 - migrations can define other migrations as dependencies
 - `make test` clears migration status of `test/migrations` before running mocha

## 0.3.0 (2013/10/02)

 - new migration generator with significantly improved `flok init`
 -- `flok init` guides the user by asking questions and using the answers to generate the migration template
 -- plugins can now dynamically add to the migration template generated by `flok init`
 - lint

## 0.2.1 (2013/09/26)

 - fix `flok show <id>` when `<id>` has an uppercase letter

## 0.2.0 (2013/09/25)

 - add `--count` switch to `flok show`

## 0.1.2 (2013/09/24)

 - fix exit code of `flok` when `flok-up` / `flok-down` fail
